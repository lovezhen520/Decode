/*
new Env('阿里云社区');
@Date: 2024-05-09 13:40

@Description:
阿里云服务 每日签到、点赞、评论、收藏，积分可兑换实物

获取 Cookie 方式： 阿里云 APP - 首页 - 积分商城

变量名: aliyunWeb_data、aliyunWeb_time

注意事项 - 因文章评论需要审核，所以请按推荐时间执行：
   12点前执行一次：签到、点赞、收藏、评论；
   12点后执行一次：积分收取、取消点赞、取消收藏；
   如需自定义时间，请修改 aliyunWeb_time 变量值，取值范围为 1-23 之间的整数
------------------------------------------------------------------------------

[Script]
http-response ^https?:\/\/developer\.aliyun\.com\/developer\/api\/my\/user\/getUser script-path=https://raw.githubusercontent.com/lck7/Script/main/Alysq.js, requires-body=true, timeout=60, tag=阿里云社区获取token
cron "0 7,13 * * *" script-path=https://raw.githubusercontent.com/lck7/Script/main/Alysq.js, tag=阿里云社区日常任务

[MITM]
hostname = developer.aliyun.com

====================================
⚠️【免责声明】
------------------------------------------
1、此脚本仅用于学习研究，不保证其合法性、准确性、有效性，请根据情况自行判断，本人对此不承担任何保证责任。
2、由于此脚本仅用于学习研究，您必须在下载后 24 小时内将所有内容从您的计算机或手机或任何存储设备中完全删除，若违反规定引起任何事件本人对此均不负责。
3、请勿将此脚本用于任何商业或非法目的，若违反规定请自行对此负责。
4、此脚本涉及应用与本人无关，本人对因此引起的任何隐私泄漏或其他后果不承担任何责任。
5、本人对任何脚本引发的问题概不负责，包括但不限于由脚本错误引起的任何损失和损害。
6、如果任何单位或个人认为此脚本可能涉嫌侵犯其权利，应及时通知并提供身份证明，所有权证明，我们将在收到认证文件确认后删除此脚本。
7、所有直接或间接使用、查看此脚本的人均应该仔细阅读此声明。本人保留随时更改或补充此声明的权利。一旦您使用或复制了此脚本，即视为您已接受此免责声明。
 */

const _0xefce07=_0x7e92;(function(_0x5453ee,_0x58ed8b){const _0x37bae5=_0x7e92,_0x38ce2e=_0x5453ee();while(!![]){try{const _0x33738c=-parseInt(_0x37bae5(0x1c5))/0x1+-parseInt(_0x37bae5(0x1d4))/0x2*(parseInt(_0x37bae5(0x1c7))/0x3)+-parseInt(_0x37bae5(0xd7))/0x4*(-parseInt(_0x37bae5(0x16f))/0x5)+-parseInt(_0x37bae5(0x1dc))/0x6*(-parseInt(_0x37bae5(0xb8))/0x7)+parseInt(_0x37bae5(0x16d))/0x8+parseInt(_0x37bae5(0x101))/0x9*(parseInt(_0x37bae5(0x106))/0xa)+-parseInt(_0x37bae5(0x1dd))/0xb*(-parseInt(_0x37bae5(0xe5))/0xc);if(_0x33738c===_0x58ed8b)break;else _0x38ce2e['push'](_0x38ce2e['shift']());}catch(_0x501bc6){_0x38ce2e['push'](_0x38ce2e['shift']());}}}(_0x59e2,0x3f4f5));const $=new Env(_0xefce07(0x1f9)),ckName=_0xefce07(0xce),controlTime=($[_0xefce07(0x155)]()?process[_0xefce07(0x112)][_0xefce07(0xe1)]:$[_0xefce07(0x104)](_0xefce07(0xe1)))||'12';$[_0xefce07(0xe2)]='';const Notify=0x1,notify=$['isNode']()?require(_0xefce07(0x108)):'';let envSplitor=['@'];var userCookie=($[_0xefce07(0x155)]()?process[_0xefce07(0x112)][ckName]:$[_0xefce07(0x104)](ckName))||'';let userList=[],userIdx=0x0,userCount=0x0;const taskGroup=[{'code':'','name':_0xefce07(0x19e)},{'code':_0xefce07(0x1e2),'name':_0xefce07(0xf8)},{'code':_0xefce07(0xf0),'name':_0xefce07(0x1c6)},{'code':'yitian','name':'倚天'},{'code':_0xefce07(0xa3),'name':_0xefce07(0xa7)},{'code':_0xefce07(0x105),'name':_0xefce07(0x128)},{'code':_0xefce07(0x115),'name':_0xefce07(0x138)},{'code':_0xefce07(0x149),'name':_0xefce07(0x1fc)},{'code':_0xefce07(0x8d),'name':_0xefce07(0x166)},{'code':_0xefce07(0xc0),'name':'大数据与机器学习'},{'code':_0xefce07(0x182),'name':_0xefce07(0xbe)},{'code':_0xefce07(0x145),'name':'视觉智能'},{'code':_0xefce07(0x1e9),'name':_0xefce07(0x12a)},{'code':_0xefce07(0xaf),'name':_0xefce07(0x162)},{'code':_0xefce07(0xfd),'name':_0xefce07(0x1ca)}];$[_0xefce07(0x12c)]=($['isNode']()?process[_0xefce07(0x112)][_0xefce07(0xa2)]:$[_0xefce07(0x104)](_0xefce07(0x12c)))||'false',$['notifyList']=[],$[_0xefce07(0x1d2)]=[],$['codeServer']=($[_0xefce07(0x155)]()?process[_0xefce07(0x112)][_0xefce07(0x172)]:$[_0xefce07(0x104)]('@codeServer.address'))||'',$[_0xefce07(0xcc)]=($[_0xefce07(0x155)]()?process[_0xefce07(0x112)][_0xefce07(0x1f3)]:$[_0xefce07(0x104)](_0xefce07(0x1d3)))||_0xefce07(0x18e),$[_0xefce07(0x170)]=$[_0xefce07(0xcc)]!=_0xefce07(0x18e)&&$[_0xefce07(0x160)]&&$[_0xefce07(0xe2)];let pendingScore=0x0,userScore=0x0;async function main(){const _0x507174=_0xefce07,_0x1392cc={'meQzE':_0x507174(0x1fb),'fruHZ':function(_0x5be263,_0x558f59){return _0x5be263<_0x558f59;},'VRmXj':_0x507174(0xec),'MhBIC':function(_0x47fb8d,_0x200b21){return _0x47fb8d<_0x200b21;},'ZRury':_0x507174(0x1f7),'uJTvE':_0x507174(0x134),'lfiNi':function(_0x176d6d,_0x3e212a){return _0x176d6d===_0x3e212a;},'LxUkJ':_0x507174(0xbd),'zGFGZ':function(_0x1d0369,_0x1785e1){return _0x1d0369(_0x1785e1);},'BhqUO':function(_0x44c019,_0x2d9463){return _0x44c019||_0x2d9463;}};try{$['log'](_0x1392cc[_0x507174(0x98)]);for(let _0x2057cb of userList){console[_0x507174(0x11c)]('🔷账号'+_0x2057cb[_0x507174(0x1a7)]+_0x507174(0xd2)),console['log'](_0x507174(0xa9)+_0x2057cb[_0x507174(0x10b)]()+'秒');const _0x542d0e=Date['now']();userScore=await _0x2057cb[_0x507174(0x1d8)]()??{};if(_0x2057cb['ckStatus']){if(_0x1392cc[_0x507174(0x1fa)](_0x542d0e,new Date(new Date()[_0x507174(0x1a0)](Math['floor'](controlTime),0x0,0x0,0x0))[_0x507174(0x1c1)]())){for(let _0x2dc088 of taskGroup){const _0x33366d=await _0x2057cb[_0x507174(0x1bb)](_0x2dc088[_0x507174(0x14e)]),_0x3cc90e=await _0x2057cb[_0x507174(0x99)](_0x33366d);await _0x2057cb[_0x507174(0x121)](_0x3cc90e,_0x2dc088[_0x507174(0x167)]),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]());const _0x1dd0aa=await _0x2057cb['assessSignInBonusQualification'](_0x33366d,_0x2dc088['name']);await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()),_0x1dd0aa&&(await _0x2057cb[_0x507174(0x1f2)](_0x33366d,_0x2dc088[_0x507174(0x167)]),await $[_0x507174(0x1a2)](_0x2057cb['getRandomTime']()));}const _0x491b3e=await _0x2057cb['getEbooks']();await $['wait'](_0x2057cb[_0x507174(0x10b)]());const _0x3e215f=await _0x2057cb[_0x507174(0x8b)](_0x491b3e,_0x1392cc['VRmXj']);await $['wait'](_0x2057cb[_0x507174(0x10b)]()),await _0x2057cb['addBookComment'](_0x491b3e,_0x3e215f),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]());for(let _0x4bf787=0x0;_0x1392cc[_0x507174(0x14c)](_0x4bf787,0x5);_0x4bf787++){const _0x1e5997=await _0x2057cb[_0x507174(0xed)]();await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()),await _0x2057cb[_0x507174(0x156)](_0x1e5997,_0x1392cc['ZRury'],0x0),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()),await _0x2057cb[_0x507174(0x156)](_0x1e5997,_0x1392cc[_0x507174(0xea)],0x0),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]());_0x1392cc[_0x507174(0x1a4)](_0x4bf787,0x0)&&(await _0x2057cb['addComment'](_0x1e5997),await $['wait'](_0x2057cb[_0x507174(0x10b)]()));const _0x40eb10=await _0x2057cb[_0x507174(0x179)]();await $['wait'](_0x2057cb[_0x507174(0x10b)]());if(_0x40eb10&&_0x40eb10?.['id']){const _0x5e2bee=await _0x2057cb[_0x507174(0x8b)](_0x40eb10['id'],_0x1392cc[_0x507174(0x157)]);await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]());const _0x17ff83=await _0x2057cb[_0x507174(0xa6)](_0x40eb10);await $['wait'](_0x2057cb[_0x507174(0x10b)]()),_0x17ff83&&(await _0x2057cb['voteAnswer'](_0x40eb10['id'],_0x17ff83,_0x5e2bee,0x1),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()));}}pendingScore=await _0x2057cb[_0x507174(0x1a6)](),$[_0x507174(0x1b1)]=_0x507174(0x1d1)+pendingScore,_0x1392cc[_0x507174(0x1b6)](DoubleLog,_0x507174(0x194)+userScore+_0x507174(0xae)+pendingScore);}else{for(let _0x4d4656 of taskGroup){const _0x4bcb34=await _0x2057cb[_0x507174(0x1bb)](_0x4d4656[_0x507174(0x14e)]),_0x219904=await _0x2057cb[_0x507174(0x97)](_0x4bcb34,_0x4d4656[_0x507174(0x167)]);await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()),_0x219904&&(await _0x2057cb['receiveSignInBonus'](_0x4bcb34,_0x4d4656[_0x507174(0x167)]),await $['wait'](_0x2057cb[_0x507174(0x10b)]()));}pendingScore=await _0x2057cb[_0x507174(0x1a6)](),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()),await _0x2057cb[_0x507174(0x1eb)](),await $[_0x507174(0x1a2)](_0x2057cb['getRandomTime']()),await $[_0x507174(0x1a2)](_0x2057cb['getRandomTime']());const _0x5259db=await _0x2057cb[_0x507174(0x15b)]()??[];await $[_0x507174(0x1a2)](_0x2057cb['getRandomTime']());if(_0x5259db[_0x507174(0x125)])for(let _0x1d0d39 of _0x5259db){await _0x2057cb['likeOrNotLike'](_0x1d0d39[_0x507174(0x17a)],_0x1392cc['ZRury'],0x1),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]()),await _0x2057cb[_0x507174(0x156)](_0x1d0d39['objectId'],_0x507174(0x134),0x1),await $[_0x507174(0x1a2)](_0x2057cb[_0x507174(0x10b)]());}let _0x465244=await _0x2057cb['interactData']()??{};$[_0x507174(0x1b1)]='本次运行共获得'+_0x1392cc[_0x507174(0x1f0)](pendingScore,0x0)+'积分',_0x1392cc['zGFGZ'](DoubleLog,_0x507174(0x17e)+pendingScore+_0x507174(0x153)+_0x465244);}}else $[_0x507174(0x1d2)]['push'](_0x507174(0xee)+(_0x2057cb[_0x507174(0xa5)]||_0x2057cb[_0x507174(0x1a7)])+_0x507174(0x1db));$[_0x507174(0x154)][_0x507174(0x1f4)]({'id':_0x2057cb['index'],'avatar':_0x2057cb['avatar'],'message':$[_0x507174(0x1d2)]}),$['notifyMsg']=[];}}catch(_0x2856c5){$['log'](_0x507174(0x147)+_0x2856c5);throw new Error(_0x507174(0x147)+_0x2856c5);}}class UserInfo{constructor(_0x509b90){const _0x294748=_0xefce07,_0x126511={'rMtrC':function(_0x488f39,_0x4fae6d){return _0x488f39===_0x4fae6d;},'zfgDE':_0x294748(0x159),'xItFi':function(_0xebfe47,_0x3d6bb4){return _0xebfe47+_0x3d6bb4;},'OEICI':function(_0x26dd18,_0x3f28c3,_0x1923a0){return _0x26dd18(_0x3f28c3,_0x1923a0);},'kkAZQ':function(_0x43980e,_0x5ef6c1){return _0x43980e==_0x5ef6c1;},'qgmcv':_0x294748(0x19a),'tXlwD':'https://developer.aliyun.com/'};this[_0x294748(0x1a7)]=++userIdx,this['token']=_0x509b90[_0x294748(0x17d)]||_0x509b90,this[_0x294748(0x14a)]=_0x509b90['userId'],this[_0x294748(0xa5)]=_0x509b90[_0x294748(0xa5)],this['avatar']=_0x509b90['avatar'],this[_0x294748(0x111)]=!![],this[_0x294748(0xef)]='',this[_0x294748(0xd6)]=_0x126511[_0x294748(0xa8)],this[_0x294748(0xf2)]={'Cookie':this[_0x294748(0x17d)],'User-Agent':'Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/122.0.0.0\x20Safari/537.36','Referer':_0x126511[_0x294748(0x150)]},this['getRandomTime']=()=>randomInt(0x1,0x5),this['fetch']=async _0x3f0fd3=>{const _0xade791=_0x294748;try{if(_0x126511['rMtrC'](typeof _0x3f0fd3,_0x126511[_0xade791(0x190)]))_0x3f0fd3={'url':_0x3f0fd3};if(_0x3f0fd3?.[_0xade791(0x1a5)]?.[_0xade791(0x10a)]('/'))_0x3f0fd3[_0xade791(0x1a5)]=_0x126511[_0xade791(0xc7)](this[_0xade791(0xd6)],_0x3f0fd3[_0xade791(0x1a5)]);const _0x2c256a=await Request({..._0x3f0fd3,'headers':_0x3f0fd3['headers']||this[_0xade791(0xf2)],'url':_0x3f0fd3[_0xade791(0x1a5)]||this[_0xade791(0xef)]});_0x126511['OEICI'](debug,_0x2c256a,_0x3f0fd3?.[_0xade791(0x1a5)]?.[_0xade791(0x1c2)](/\/+$/,'')[_0xade791(0x1e5)](_0x126511[_0xade791(0xc7)](_0x3f0fd3?.[_0xade791(0x1a5)]?.[_0xade791(0x1b8)]('/'),0x1)));if(_0x126511[_0xade791(0x189)](_0x2c256a?.[_0xade791(0x14e)],0x9c41))throw new Error(_0x2c256a?.[_0xade791(0x1bf)]||_0xade791(0x1d5));return _0x2c256a;}catch(_0x511e27){this[_0xade791(0x111)]=![],$[_0xade791(0x11c)](_0xade791(0x1cf)+_0x511e27);}};}async[_0xefce07(0xc4)](){const _0x392b6a=_0xefce07,_0x152e38={'ifVPM':_0x392b6a(0x1ab)};try{const _0x1e3b21={'url':_0x392b6a(0x123),'type':_0x152e38[_0x392b6a(0xf5)]};await this['fetch'](_0x1e3b21);}catch(_0x3f7b2d){this['ckStatus']=![],$['log']('⛔️\x20获取签到任务列表失败!\x20'+_0x3f7b2d);}}async[_0xefce07(0x97)](_0x4ffa2a,_0x6e2823){const _0x35bf9d=_0xefce07,_0x39d666={'VrtSm':_0x35bf9d(0x1ab)};try{const _0xaf6e11={'url':_0x35bf9d(0x1df),'type':_0x39d666[_0x35bf9d(0xdc)],'params':{'taskGroupId':_0x4ffa2a}};let _0x9ea257=await this['fetch'](_0xaf6e11);return _0x9ea257?.[_0x35bf9d(0x1f5)];}catch(_0xbc23ec){this[_0x35bf9d(0x111)]=![],$[_0x35bf9d(0x11c)]('⛔️\x20查询领奖条件失败!\x20'+_0xbc23ec);}}async['receiveSignInBonus'](_0x2ea5a6,_0x8778a3){const _0x268bbf=_0xefce07,_0x427d2d={'nvrws':_0x268bbf(0xd1),'lLIfd':_0x268bbf(0x1bd),'OPatT':function(_0x5b0122,_0x3c44df){return _0x5b0122==_0x3c44df;},'jVDqw':function(_0x44ecd2,_0x375757){return _0x44ecd2||_0x375757;},'ZSwbl':_0x268bbf(0x185)};try{const _0x245ae5={'url':_0x427d2d[_0x268bbf(0x17c)],'type':_0x427d2d[_0x268bbf(0xfe)],'dataType':_0x268bbf(0xc8),'body':{'taskGroupId':_0x2ea5a6}};let _0x557fd3=await this[_0x268bbf(0x109)](_0x245ae5);if(_0x427d2d[_0x268bbf(0x1d7)](_0x557fd3?.['code'],_0x268bbf(0xc9))){const _0x5f223c=_0x557fd3?.[_0x268bbf(0x1f5)]||0x0;$[_0x268bbf(0x11c)](_0x268bbf(0x188)+_0x427d2d['jVDqw'](_0x8778a3,_0x427d2d[_0x268bbf(0x148)])+':\x20获得\x20'+_0x5f223c+'\x20积分');}else $[_0x268bbf(0x11c)](_0x268bbf(0x84)+_0x427d2d[_0x268bbf(0xa1)](_0x8778a3,_0x427d2d[_0x268bbf(0x148)])+':\x20'+_0x557fd3?.['message']);}catch(_0xbecb87){this[_0x268bbf(0x111)]=![],$[_0x268bbf(0x11c)](_0x268bbf(0x1ef)+_0xbecb87);}}async['getUserSpaceSignInDetail'](_0x49593b){const _0x55fffb=_0xefce07,_0x35cfd3={'xaWYN':_0x55fffb(0x1ab)};try{const _0x4edab1={'url':_0x55fffb(0x1b4),'type':_0x35cfd3[_0x55fffb(0x13e)],'params':{'excode':_0x49593b}};let _0xcee507=await this['fetch'](_0x4edab1);const _0x5e9f03=_0xcee507?.[_0x55fffb(0x1f5)]?.[_0x55fffb(0xcd)];return _0x5e9f03;}catch(_0x2e5a31){this[_0x55fffb(0x111)]=![],$[_0x55fffb(0x11c)]('⛔️\x20获取签到任务列表失败!\x20'+_0x2e5a31);}}async[_0xefce07(0x99)](_0x420ecc){const _0x50ba8e=_0xefce07,_0x852f1f={'VUlWn':'get','IXwFj':function(_0x4561d7,_0x4ecc4b){return _0x4561d7>=_0x4ecc4b;},'NxSKU':function(_0x13ba8d,_0x171218){return _0x13ba8d<=_0x171218;}};try{const _0xc66fa1={'url':_0x50ba8e(0xc5)+_0x420ecc,'type':_0x852f1f[_0x50ba8e(0xe3)]};let _0x45aa05=await this[_0x50ba8e(0x109)](_0xc66fa1);const _0x5821c1=_0x45aa05?.[_0x50ba8e(0x1f5)]?.[_0x50ba8e(0x7b)];let _0x5b19c9={};if(_0x5821c1[_0x50ba8e(0x125)]){const _0x282e2f=new Date()[_0x50ba8e(0x1c1)]();for(let _0x2ed967 of _0x5821c1){if(_0x852f1f[_0x50ba8e(0xfb)](_0x282e2f,_0x2ed967['gmtEnableStart'])&&_0x852f1f[_0x50ba8e(0x14f)](_0x282e2f,_0x2ed967['gmtEnableEnd'])){const _0x403029=JSON[_0x50ba8e(0xf9)](_0x2ed967[_0x50ba8e(0x13c)][_0x50ba8e(0x1c2)](/&quot;/g,'\x22'));_0x5b19c9['actionCode']=_0x403029[_0x50ba8e(0x13d)][0x0][_0x50ba8e(0xe7)],_0x5b19c9['activityCode']=_0x403029[_0x50ba8e(0x13d)][0x0][_0x50ba8e(0xe7)],_0x5b19c9[_0x50ba8e(0x17a)]=_0x403029['actions'][0x0][_0x50ba8e(0x17a)];}}}return _0x5b19c9;}catch(_0x4a40cf){this[_0x50ba8e(0x111)]=![],$['log'](_0x50ba8e(0x17f)+_0x4a40cf);}}async[_0xefce07(0x121)](_0x388c0c,_0x126ae8){const _0x549118=_0xefce07,_0x36d932={'svCqp':_0x549118(0x7d),'LBiVN':'form','xBKxF':_0x549118(0x185)};try{const _0x4099b8={'url':_0x36d932[_0x549118(0x12b)],'type':_0x549118(0x1bd),'dataType':_0x36d932['LBiVN'],'body':_0x388c0c};let _0x24a809=await this[_0x549118(0x109)](_0x4099b8);$[_0x549118(0x11c)](_0x549118(0x1a9)+(_0x126ae8||_0x36d932[_0x549118(0x191)])+':\x20'+_0x24a809?.[_0x549118(0x1bf)]);}catch(_0x295606){this[_0x549118(0x111)]=![],$[_0x549118(0x11c)](_0x549118(0xb6)+_0x295606);}}async[_0xefce07(0xed)](){const _0x1988cf=_0xefce07,_0x11aa63={'DwyyC':function(_0x599b4f,_0x3c4086){return _0x599b4f(_0x3c4086);},'LvdqR':_0x1988cf(0xbf),'SUDcg':'data-id','qYwXK':function(_0x38db3a,_0x530bb7){return _0x38db3a(_0x530bb7);},'ZQLMs':function(_0x4fab79,_0x1b057e){return _0x4fab79+_0x1b057e;},'QFVeM':function(_0xf0cfa6,_0x286f49){return _0xf0cfa6*_0x286f49;},'gDaBY':'get','QfMeK':'.community-detail-content','jcjiE':'.community-list'};try{const _0x7f2e9=_0x11aa63[_0x1988cf(0x1aa)](Math[_0x1988cf(0x107)](_0x11aa63[_0x1988cf(0x11a)](Math[_0x1988cf(0x197)](),0x1f)),0x1),_0x4d5a55={'url':'https://developer.aliyun.com/group/aliware/article_hot?pageNum='+_0x7f2e9,'type':_0x11aa63[_0x1988cf(0x199)]};let _0x47d444=await this['fetch'](_0x4d5a55);const _0x10ca74=$[_0x1988cf(0x1ea)][_0x1988cf(0xf6)](_0x47d444),_0x3db9bf=_0x11aa63[_0x1988cf(0xb3)](_0x10ca74,_0x11aa63[_0x1988cf(0x1cb)]),_0x42315e=_0x3db9bf[_0x1988cf(0x1f6)](_0x11aa63['jcjiE'])[_0x1988cf(0x14b)]((_0x9196a5,_0x425772)=>{const _0x2f50ec=_0x1988cf;return{'id':_0x11aa63[_0x2f50ec(0xb3)](_0x10ca74,_0x425772)[_0x2f50ec(0x1f6)](_0x11aa63[_0x2f50ec(0x79)])[_0x2f50ec(0x165)](_0x11aa63[_0x2f50ec(0x1ee)]),'name':_0x11aa63[_0x2f50ec(0x177)](_0x10ca74,_0x425772)['find'](_0x2f50ec(0x146))[_0x2f50ec(0x87)]()};})['get'](),_0xc8a501=_0x42315e[Math[_0x1988cf(0x107)](_0x11aa63[_0x1988cf(0x11a)](Math[_0x1988cf(0x197)](),_0x42315e[_0x1988cf(0x125)]))],{id:_0x5aa108,name:_0x388ce0}=_0xc8a501;return $[_0x1988cf(0x11c)](_0x1988cf(0x187)+_0x5aa108+_0x1988cf(0xf4)+_0x388ce0),_0x5aa108;}catch(_0x104315){this[_0x1988cf(0x111)]=![],$['log'](_0x1988cf(0xe8)+_0x104315);}}async[_0xefce07(0xfc)](){const _0x1318a2=_0xefce07,_0x357d94={'fTyWg':function(_0xa99540,_0x4a9638){return _0xa99540(_0x4a9638);},'aXUwW':_0x1318a2(0x164),'mKtTJ':_0x1318a2(0x192),'unfRc':function(_0xf3be35,_0x5ab734){return _0xf3be35(_0x5ab734);},'ouIvB':function(_0xd20fee,_0x2c5a25){return _0xd20fee+_0x2c5a25;},'uXXuT':function(_0x17928d,_0x2ef1f6){return _0x17928d*_0x2ef1f6;},'FSJBl':'get','nKZgp':_0x1318a2(0x11f),'xnVwH':function(_0x539ac9,_0x24b3aa){return _0x539ac9*_0x24b3aa;}};try{const _0x2e5b6a=_0x357d94[_0x1318a2(0x15d)](Math['floor'](_0x357d94['uXXuT'](Math['random'](),0x1f5)),0x1),_0x10a23b={'url':'https://developer.aliyun.com/ebook/index/__0_0_0_'+_0x2e5b6a,'type':_0x357d94[_0x1318a2(0x12d)]};let _0x4d3a0a=await this[_0x1318a2(0x109)](_0x10a23b);const _0xe5f697=$[_0x1318a2(0x1ea)][_0x1318a2(0xf6)](_0x4d3a0a),_0x2625f3=_0xe5f697(_0x357d94['nKZgp']),_0x314f9e=_0x2625f3[_0x1318a2(0x1f6)](_0x1318a2(0x1b0))[_0x1318a2(0x14b)]((_0x1923bf,_0x4c95b3)=>{const _0x2c2965=_0x1318a2;return{'id':_0x357d94['fTyWg'](_0xe5f697,_0x4c95b3)[_0x2c2965(0x165)](_0x357d94['aXUwW'])[_0x2c2965(0x1c2)](_0x357d94[_0x2c2965(0x19f)],''),'name':_0x357d94[_0x2c2965(0xde)](_0xe5f697,_0x4c95b3)[_0x2c2965(0x1f6)]('.ebook-home-title')['text']()};})['get'](),_0x4c55a2=_0x314f9e[Math[_0x1318a2(0x107)](_0x357d94[_0x1318a2(0x129)](Math[_0x1318a2(0x197)](),_0x314f9e[_0x1318a2(0x125)]))],{id:_0x328bb2,name:_0x33e923}=_0x4c55a2;return $['log']('✅\x20随机电子书id：\x20'+_0x328bb2+_0x1318a2(0xf4)+_0x33e923),_0x328bb2;}catch(_0x50147c){this[_0x1318a2(0x111)]=![],$[_0x1318a2(0x11c)](_0x1318a2(0x80)+_0x50147c);}}async[_0xefce07(0x179)](){const _0x544c66=_0xefce07,_0x2f5305={'niFPa':function(_0x5dfe44,_0x6db94){return _0x5dfe44(_0x6db94);},'EpfWt':_0x544c66(0xa4),'nIIgt':function(_0x141adc,_0x1254e9){return _0x141adc(_0x1254e9);},'jZtKC':'.askProduct-item-title-text\x20h3','iPqWp':function(_0x539ce9,_0x1d60cc){return _0x539ce9(_0x1d60cc);},'BSxsg':function(_0x137436,_0x16f598){return _0x137436(_0x16f598);},'nKMNM':function(_0x344d6c,_0x47d433){return _0x344d6c+_0x47d433;},'afzfu':function(_0x1a2ff6,_0x19244f){return _0x1a2ff6*_0x19244f;},'OArao':'get','LZHVW':function(_0x6e622,_0x5255a5){return _0x6e622(_0x5255a5);},'GoCgC':_0x544c66(0x10f),'IWNis':_0x544c66(0x13a)};try{const _0x211306=_0x2f5305[_0x544c66(0x16b)](Math[_0x544c66(0x107)](_0x2f5305['afzfu'](Math['random'](),0x1f)),0x1),_0x5b9ee0={'url':_0x544c66(0xba)+_0x211306,'type':_0x2f5305[_0x544c66(0xb0)]};let _0x208ed7=await this[_0x544c66(0x109)](_0x5b9ee0);const _0xb937cc=$[_0x544c66(0x1ea)][_0x544c66(0xf6)](_0x208ed7),_0xbcfb4b=_0x2f5305[_0x544c66(0xa0)](_0xb937cc,_0x2f5305[_0x544c66(0x18f)]),_0x2472c0=_0xbcfb4b['find'](_0x2f5305[_0x544c66(0xd3)])[_0x544c66(0x14b)]((_0x12833f,_0x3ee31e)=>{const _0x1ad458=_0x544c66;return{'id':_0x2f5305[_0x1ad458(0x96)](_0xb937cc,_0x3ee31e)['attr'](_0x2f5305[_0x1ad458(0x8f)])||'','name':_0x2f5305[_0x1ad458(0x93)](_0xb937cc,_0x3ee31e)['find'](_0x2f5305['jZtKC'])['text']()||'','answer':_0x2f5305[_0x1ad458(0x9d)](parseInt,_0x2f5305['BSxsg'](_0xb937cc,_0x3ee31e)[_0x1ad458(0x1f6)](_0x1ad458(0x9e))[_0x1ad458(0x87)]())||''};})[_0x544c66(0x1a8)]((_0x2d891c,_0x461091)=>_0x461091[_0x544c66(0xcb)]>0x0)[_0x544c66(0x1ab)](),_0x5c7887=_0x2472c0[Math['floor'](Math[_0x544c66(0x197)]()*_0x2472c0['length'])];if(_0x5c7887?.['id']&&_0x5c7887?.[_0x544c66(0x167)]){const {id:_0x1c5d0f,name:_0x50e1fc}=_0x5c7887;return $[_0x544c66(0x11c)]('✅\x20随机获取问答id：\x20'+_0x1c5d0f+_0x544c66(0xf4)+_0x50e1fc),_0x5c7887;}return null;}catch(_0x15dc59){this['ckStatus']=![],$[_0x544c66(0x11c)](_0x544c66(0x1f1)+_0x15dc59);}}async[_0xefce07(0xa6)](_0x386aaa){const _0x3a7360=_0xefce07,_0x229eb6={'NOkut':_0x3a7360(0x1ab),'dofSg':function(_0x545733,_0x135fb7){return _0x545733(_0x135fb7);},'AKyqo':_0x3a7360(0x102),'HyToq':_0x3a7360(0x1e4),'cqzib':function(_0x495bc5,_0x4228c4){return _0x495bc5*_0x4228c4;}};try{const _0x2d6a40={'url':_0x3a7360(0x114)+_0x386aaa['id'],'type':_0x229eb6[_0x3a7360(0xca)]};let _0x117224=await this['fetch'](_0x2d6a40);const _0x1fa9ee=$[_0x3a7360(0x1ea)][_0x3a7360(0xf6)](_0x117224),_0x37f100=_0x229eb6['dofSg'](_0x1fa9ee,_0x229eb6[_0x3a7360(0x136)]),_0x3b81bf=_0x37f100['find'](_0x229eb6['HyToq'])[_0x3a7360(0x14b)]((_0xc7b88b,_0x2ea08f)=>{const _0x109cbe=_0x3a7360;return{'id':_0x1fa9ee(_0x2ea08f)['attr'](_0x109cbe(0xa4))||''};})[_0x3a7360(0x1ab)](),_0x2cbfdf=_0x3b81bf[Math[_0x3a7360(0x107)](_0x229eb6[_0x3a7360(0x83)](Math[_0x3a7360(0x197)](),_0x386aaa[_0x3a7360(0xcb)]))];if(_0x2cbfdf){const {id:_0x3989a9}=_0x2cbfdf;return $[_0x3a7360(0x11c)](_0x3a7360(0x1b9)+_0x3989a9),_0x3989a9;}return null;}catch(_0x464278){this[_0x3a7360(0x111)]=![],$[_0x3a7360(0x11c)](_0x3a7360(0x9f)+_0x464278);}}async[_0xefce07(0x156)](_0x28c83e,_0x27a55e,_0xfa7fc5){const _0x31957c=_0xefce07,_0x2cd5db={'BpTSi':_0x31957c(0x103),'qfZOK':function(_0x1f4442,_0x1b9bae){return _0x1f4442===_0x1b9bae;},'tfCrs':'aliyun-public-like','QiFRw':function(_0x4729ac,_0x409394){return _0x4729ac===_0x409394;},'fZGQz':function(_0x1ebe98,_0x124404){return _0x1ebe98===_0x124404;}};try{const _0x442b4c={'url':'https://ucc.aliyun.com/uccPagingComponent/likeOrNotLike','type':_0x31957c(0x1ab),'params':{'bizCategory':_0x2cd5db['BpTSi'],'actionCode':_0x27a55e,'objectId':_0x28c83e,'status':_0xfa7fc5,'uccCsrfToken':await this[_0x31957c(0x181)](),'callback':getCallback()}};await this['fetch'](_0x442b4c),$[_0x31957c(0x11c)]('✅\x20'+(_0x2cd5db[_0x31957c(0xf3)](_0x27a55e,_0x2cd5db[_0x31957c(0x10c)])?'文章'+(_0x2cd5db[_0x31957c(0xe9)](_0xfa7fc5,0x1)?'取消':'')+'点赞':'文章'+(_0xfa7fc5===0x1?'取消':'')+'收藏')+'：\x20'+_0x28c83e);}catch(_0x49f301){this['ckStatus']=![],$[_0x31957c(0x11c)]('⛔️\x20'+(_0x2cd5db['fZGQz'](_0x27a55e,_0x2cd5db[_0x31957c(0x10c)])?'文章'+(_0x2cd5db['fZGQz'](_0xfa7fc5,0x1)?'取消':'')+'点赞':'文章'+(_0x2cd5db['qfZOK'](_0xfa7fc5,0x1)?'取消':'')+'收藏')+_0x31957c(0x11b)+_0x49f301);}}async[_0xefce07(0x8b)](_0x142031,_0x392789){const _0x5c01e0=_0xefce07,_0x26eb9b={'nLSeZ':_0x5c01e0(0x1ab),'cPKMR':_0x5c01e0(0x186)};try{const _0x56c1a2={'url':'https://developer.aliyun.com/csrfToken','type':_0x26eb9b[_0x5c01e0(0x1de)],'headers':{'Cookie':this[_0x5c01e0(0x17d)],'User-Agent':_0x26eb9b[_0x5c01e0(0x7c)],'Referer':_0x5c01e0(0x139)+_0x392789+'/'+_0x142031}},_0x803f4a=await this[_0x5c01e0(0x109)](_0x56c1a2);return _0x803f4a?.['token'];}catch(_0x23bd33){this[_0x5c01e0(0x111)]=![],$[_0x5c01e0(0x11c)](_0x5c01e0(0x1b5)+_0x23bd33);}}async[_0xefce07(0xd0)](_0x38456e,_0x4fd8af,_0x320ec4,_0x5f3975){const _0x560445=_0xefce07;try{const _0xa205de={'url':_0x560445(0x9b),'type':_0x560445(0x1bd),'dataType':_0x560445(0xc8),'headers':{'Cookie':this[_0x560445(0x17d)],'User-Agent':_0x560445(0x186),'Referer':'https://developer.aliyun.com/ask/'+_0x38456e},'params':{'p_csrf':_0x320ec4},'body':{'id':_0x4fd8af,'votes':_0x5f3975}};await this['fetch'](_0xa205de),$[_0x560445(0x11c)](_0x560445(0x16c)+_0x38456e+'-'+_0x4fd8af);}catch(_0x2f1cee){this['ckStatus']=![],$['log'](_0x560445(0x193)+_0x2f1cee);}}async[_0xefce07(0x89)](_0x47af4f,_0x4ca875){const _0x17d900=_0xefce07,_0x19912a={'KMPYX':_0x17d900(0x1bd),'jxndX':'json','QAIfc':_0x17d900(0x1be),'xROuF':function(_0xb4d507,_0xc43656){return _0xb4d507==_0xc43656;},'YfpbD':_0x17d900(0xc9)};try{const _0x1af66e={'url':_0x17d900(0xe6),'type':_0x19912a[_0x17d900(0x10e)],'dataType':_0x19912a[_0x17d900(0x1e6)],'headers':{'Cookie':this[_0x17d900(0x17d)],'User-Agent':_0x17d900(0x186),'Referer':_0x17d900(0x1da)+_0x47af4f},'params':{'p_csrf':_0x4ca875},'body':{'eBookId':_0x47af4f,'score':0xa,'content':_0x19912a[_0x17d900(0x127)]}},_0x255b65=await this[_0x17d900(0x109)](_0x1af66e);_0x19912a[_0x17d900(0x15a)](_0x255b65?.[_0x17d900(0x14e)],_0x19912a[_0x17d900(0x1d6)])?$[_0x17d900(0x11c)](_0x17d900(0x183)+_0x47af4f):$[_0x17d900(0x11c)](_0x17d900(0x141)+_0x255b65?.[_0x17d900(0x1bf)]);}catch(_0x117472){this[_0x17d900(0x111)]=![],$[_0x17d900(0x11c)]('⛔️\x20评价电子书失败!\x20'+_0x117472);}}async[_0xefce07(0x15b)](){const _0x4c864b=_0xefce07,_0xf8f62={'pHmBw':_0x4c864b(0x1ab),'vsPWP':function(_0x224ac6,_0x3bd08c){return _0x224ac6===_0x3bd08c;},'YOgtD':'aliyun-public-like','qbxEC':_0x4c864b(0x171),'uUSya':_0x4c864b(0x14d)};try{const _0x543aec={'url':_0x4c864b(0xcf),'type':_0xf8f62[_0x4c864b(0x1c4)],'params':{'pageNum':0x1,'pageSize':0xa,'type':0x1}},_0x17178b=await this[_0x4c864b(0x109)](_0x543aec),{list:_0x3f6552}=_0x17178b?.[_0x4c864b(0x1f5)];if(_0x3f6552[_0x4c864b(0x125)])return $['log'](_0x4c864b(0x15e)),_0x3f6552;return[];}catch(_0x2a45e4){this[_0x4c864b(0x111)]=![],$[_0x4c864b(0x11c)](_0x4c864b(0x118)+(_0xf8f62[_0x4c864b(0x1c0)](type,_0xf8f62[_0x4c864b(0x1a3)])?_0xf8f62[_0x4c864b(0xbc)]:_0xf8f62[_0x4c864b(0x100)])+_0x4c864b(0x11b)+_0x2a45e4);}}async[_0xefce07(0x90)](_0x47b125){const _0x589da3=_0xefce07,_0x1a7199={'ddgBc':'感谢博主的分享','jhFBF':_0x589da3(0x16e),'lbUhy':_0x589da3(0x8e),'KoUDi':function(_0xa32f00){return _0xa32f00();}};try{const _0x2c3f9b={'url':_0x589da3(0x1ba),'type':_0x589da3(0x1ab),'params':{'content':encodeURIComponent(_0x1a7199['ddgBc']),'objectId':_0x47b125,'bizCategory':_0x1a7199[_0x589da3(0x135)],'commentType':0x0,'sourceAppCode':_0x1a7199[_0x589da3(0x126)],'sourceBizCategory':_0x589da3(0x1ed),'uccCsrfToken':await this['getUccCsrfToken'](),'callback':_0x1a7199[_0x589da3(0x133)](getCallback)}};await this[_0x589da3(0x109)](_0x2c3f9b),$[_0x589da3(0x11c)](_0x589da3(0x11e)+_0x47b125);}catch(_0xd247e1){this['ckStatus']=![],$['log'](_0x589da3(0xfa)+_0xd247e1);}}async[_0xefce07(0x1d8)](){const _0x5ade0d=_0xefce07,_0x132c79={'pkVGX':_0x5ade0d(0xff)};try{const _0x1e1f24={'url':_0x132c79[_0x5ade0d(0x15c)],'type':'get'};let _0x15b5f6=await this[_0x5ade0d(0x109)](_0x1e1f24);return _0x15b5f6?.[_0x5ade0d(0x1f5)];}catch(_0x2c7ea2){$['log'](_0x5ade0d(0x94)+_0x2c7ea2);}}async[_0xefce07(0x1a6)](){const _0x4bf0f2=_0xefce07,_0x1a173c={'YYjdn':'/score/pending/getUserTotalPendingScore?appCode=developer'};try{const _0x4c94cb={'url':_0x1a173c[_0x4bf0f2(0x1bc)],'type':_0x4bf0f2(0x1ab)};let _0x152627=await this[_0x4bf0f2(0x109)](_0x4c94cb);return $['log'](_0x4bf0f2(0x1b3)+_0x152627?.[_0x4bf0f2(0x1f5)]),_0x152627?.['data'];}catch(_0x5481af){$['log'](_0x4bf0f2(0xda)+_0x5481af);}}async['collect'](){const _0x4375b6=_0xefce07;try{const _0x257aee={'url':_0x4375b6(0x18d),'type':_0x4375b6(0x1ab)};let _0x5b726e=await this[_0x4375b6(0x109)](_0x257aee);return $[_0x4375b6(0x11c)](_0x4375b6(0xb4)+_0x5b726e?.[_0x4375b6(0x1f5)]),_0x5b726e?.[_0x4375b6(0x1f5)];}catch(_0x5969a8){$[_0x4375b6(0x11c)](_0x4375b6(0x1c3)+_0x5969a8);}}async[_0xefce07(0x181)](){const _0x5b98f7=_0xefce07,_0x5d2da7={'IZBGR':'get','ClEoC':function(_0x294627){return _0x294627();},'iNzcb':function(_0x283495,_0xdaa3d1){return _0x283495+_0xdaa3d1;}};try{const _0x1e6fc3={'url':'https://ucc.aliyun.com/uccPagingComponent/getUser','type':_0x5d2da7['IZBGR'],'params':{'uccCsrfToken':'','callback':_0x5d2da7[_0x5b98f7(0xc1)](getCallback)}};let _0xcb60c9=await this[_0x5b98f7(0x109)](_0x1e6fc3);const _0xb1e4bf=_0xcb60c9[_0x5b98f7(0x1ec)]('{'),_0x4c5460=_0xcb60c9['lastIndexOf']('}'),_0x53c976=_0xcb60c9[_0x5b98f7(0x1e5)](_0xb1e4bf,_0x5d2da7[_0x5b98f7(0x144)](_0x4c5460,0x1)),_0x328cd4=JSON[_0x5b98f7(0xf9)](_0x53c976);return _0x328cd4[_0x5b98f7(0x1f5)][_0x5b98f7(0x142)];}catch(_0x50ef07){$[_0x5b98f7(0x11c)](_0x5b98f7(0x180)+_0x50ef07);}}}function getCallback(){const _0x3ede88=_0xefce07,_0x3f332d={'McEBG':function(_0x3907ab,_0x49f582){return _0x3907ab+_0x49f582;},'rUovW':function(_0x5de15f,_0x3bcbb9){return _0x5de15f+_0x3bcbb9;},'oYdxb':_0x3ede88(0x18a)};return _0x3f332d[_0x3ede88(0xc3)](_0x3f332d[_0x3ede88(0xc3)](_0x3f332d[_0x3ede88(0xab)](_0x3f332d[_0x3ede88(0x116)],Date['now']()),'_'),Math['ceil'](0x186a0*Math[_0x3ede88(0x197)]()));}async function getCookie(){const _0x31fc61=_0xefce07,_0x4d7a82={'zaFSp':function(_0x22a067,_0x2b82d1){return _0x22a067===_0x2b82d1;},'aqsqj':'OPTIONS','qudbb':function(_0x33bd68,_0x4200dd){return _0x33bd68(_0x4200dd);}};if($request&&_0x4d7a82[_0x31fc61(0x17b)]($request[_0x31fc61(0x12f)],_0x4d7a82[_0x31fc61(0x19b)]))return;const _0x2eb30a=_0x4d7a82['qudbb'](ObjectKeys2LowerCase,$request['headers']),_0x230475=_0x2eb30a[_0x31fc61(0x176)],_0x2a4a9d=$[_0x31fc61(0x7a)]($response[_0x31fc61(0x1cc)]);if(!_0x2a4a9d?.['data']){$['msg']($[_0x31fc61(0x167)],_0x31fc61(0x161),'');return;}const {nickname:_0x36c605,avatar:_0x5402b3}=_0x2a4a9d?.['data'],_0x1fc868={'userId':_0x36c605,'avatar':_0x5402b3,'token':_0x230475,'userName':_0x36c605};userCookie=userCookie?JSON[_0x31fc61(0xf9)](userCookie):[];const _0x227b02=userCookie[_0x31fc61(0xaa)](_0xc9a627=>_0xc9a627[_0x31fc61(0x14a)]==_0x1fc868[_0x31fc61(0x14a)]);userCookie[_0x227b02]?userCookie[_0x227b02]=_0x1fc868:userCookie[_0x31fc61(0x1f4)](_0x1fc868),$[_0x31fc61(0xe0)](userCookie,ckName),$[_0x31fc61(0xac)]($[_0x31fc61(0x167)],'🎉'+_0x1fc868[_0x31fc61(0xa5)]+_0x31fc61(0x1c8),'');}function _0x7e92(_0x2c033f,_0x49aa03){const _0x59e2f5=_0x59e2();return _0x7e92=function(_0x7e92b0,_0x3a3dd3){_0x7e92b0=_0x7e92b0-0x79;let _0x4c0068=_0x59e2f5[_0x7e92b0];return _0x4c0068;},_0x7e92(_0x2c033f,_0x49aa03);}async function loadModule(){const _0x51c5a4=_0xefce07,_0x484026={'bCxeZ':function(_0x214df6){return _0x214df6();}};try{return $[_0x51c5a4(0x1ea)]=await _0x484026[_0x51c5a4(0x124)](loadCheerio),$['Cheerio']?!![]:![];}catch(_0x2d42d7){throw new Error(_0x51c5a4(0xeb)+_0x2d42d7);}}async function getWxToken(_0x50de1c){const _0x4f40a5=_0xefce07,_0x248375={'JnVdf':_0x4f40a5(0xdb),'UrkzT':_0x4f40a5(0x85),'gIwLu':_0x4f40a5(0x1ac),'xTbtu':function(_0x510453,_0x443e2f){return _0x510453+_0x443e2f;}};try{const _0x42e6fa={'url':_0x4f40a5(0xc2)+_0x50de1c,'dataType':_0x248375[_0x4f40a5(0x1ae)],'headers':{'Host':_0x248375[_0x4f40a5(0xb9)],'User-Agent':_0x248375['gIwLu'],'Referer':_0x4f40a5(0x13f)}};let _0x1eac35=await Request(_0x42e6fa),_0x4b2b73=_0x248375[_0x4f40a5(0x1e3)](_0x4f40a5(0x81),_0x1eac35?.[_0x4f40a5(0x1f5)]?.[_0x4f40a5(0x17d)]?.[_0x4f40a5(0x1e7)]);return _0x4b2b73;}catch(_0x3e0108){$[_0x4f40a5(0x11c)](_0x4f40a5(0xb7)+_0x3e0108);}}async function checkCodeServer(){const _0x53ff02=_0xefce07,_0x282f89={'wiGxZ':function(_0x1762b0,_0x14f9b0){return _0x1762b0(_0x14f9b0);},'xzjgK':_0x53ff02(0x95),'nngcK':function(_0x2af678,_0x30a1af){return _0x2af678(_0x30a1af);}};try{$[_0x53ff02(0x143)]=($[_0x53ff02(0x155)]()?process[_0x53ff02(0x112)][_0x282f89[_0x53ff02(0x120)]]:$['getdata']('@codeServer.fun'))||'';let _0x166537=$[_0x53ff02(0x143)]?(_0x282f89[_0x53ff02(0x1b2)](eval,$[_0x53ff02(0x143)]),await _0x282f89[_0x53ff02(0x1b2)](WxCode,$[_0x53ff02(0xe2)])):(await _0x282f89[_0x53ff02(0xe4)](Request,{'url':$[_0x53ff02(0x160)]+_0x53ff02(0x198)+$[_0x53ff02(0xe2)]}))?.[_0x53ff02(0x137)]('|')||[];_0x166537=_0x166537[_0x53ff02(0x1a8)](_0x406546=>_0x406546[_0x53ff02(0xc6)]()['length']===0x20),_0x282f89['nngcK'](debug,_0x166537),!_0x166537[_0x53ff02(0x125)]?$[_0x53ff02(0x11c)]('❌获取code授权失败！请检查服务器运行是否正常\x20=>\x20尝试读取数据持久化\x20'):$['log'](_0x53ff02(0x140)+_0x166537[_0x53ff02(0x125)]);let _0x126682=await Promise[_0x53ff02(0x110)](_0x166537[_0x53ff02(0x14b)](async _0x356fac=>{const _0x59fdf4=_0x53ff02,_0x4b39f8=await _0x282f89[_0x59fdf4(0x1b2)](getWxToken,_0x356fac);return{'token':_0x4b39f8};}));return _0x126682=_0x126682[_0x53ff02(0x1a8)](_0x47b158=>Object[_0x53ff02(0x8c)](_0x47b158)['length']!==0x0),_0x126682;}catch(_0x4b1eb5){$['log'](_0x53ff02(0xd9)+_0x4b1eb5);}}async function checkEnv(){const _0x5b40f5=_0xefce07,_0x4f3239={'Asogi':function(_0x1042ca){return _0x1042ca();}};try{let _0x1b98f9=[];if($['wxCode'])_0x1b98f9=await _0x4f3239[_0x5b40f5(0x173)](checkCodeServer)||[];else{if(!userCookie||!userCookie[_0x5b40f5(0x125)]){console[_0x5b40f5(0x11c)]('未找到CK');return;}}if(!_0x1b98f9[_0x5b40f5(0x125)]){const _0x3ebbbd=envSplitor['find'](_0x550c18=>userCookie[_0x5b40f5(0x1f8)](_0x550c18))||envSplitor[0x0];userCookie=$['toObj'](userCookie)||userCookie[_0x5b40f5(0x137)](_0x3ebbbd),_0x1b98f9=userCookie;}return userList[_0x5b40f5(0x1f4)](..._0x1b98f9[_0x5b40f5(0x14b)](_0x5b9a07=>new UserInfo(_0x5b9a07))['filter'](Boolean)),userCount=userList[_0x5b40f5(0x125)],console[_0x5b40f5(0x11c)](_0x5b40f5(0xad)+userCount+_0x5b40f5(0x184)),!![];}catch(_0xdf15e5){throw new Error(_0x5b40f5(0x122)+_0xdf15e5);}}function _0x59e2(){const _0x41a6b5=['is_debug','FSJBl',':开始下载Cheerio模块','method','timeout','concat','❌未检测到ck，请添加环境变量','KoUDi','aliyun-public-favorite','jhFBF','AKyqo','split','飞天洛神云网络','https://developer.aliyun.com/','.askProduct-item','------------\x0a','finishRule','actions','xaWYN','https://servicewechat.com/wx14413dafd16b9540/130/page-frame.html','✅获取code授权成功！当前code数量为','⛔️\x20评价电子书失败!\x20','uccCsrfToken','codeFuc','iNzcb','viapi','.feed-item-content-title\x20h3','⛔️\x20main\x20run\x20error\x20=>\x20','ZSwbl','database','userId','map','MhBIC','文章收藏','code','NxSKU','tXlwD','isSurge',':缓存中存在Cheerio模块,跳过下载',',\x20当前积分:\x20','notifyList','isNode','likeOrNotLike','LxUkJ','YrAKX','string','xROuF','getFavors','pkVGX','ouIvB','✅\x20开始取消文章的点赞与收藏记录','then','codeServer','❌获取Cookie失败!','云效DevOps','true','href','attr','PolarDB开源','name','cvSvs','wNeOL','application/json;charset=UTF-8','nKMNM','✅\x20回答点赞：\x20','873544lXzDVU','yq-comment-type-article','10RKQdhn','wxCode','文章点赞','codeServer_address','Asogi','AngRm','iWQdx','cookie','qYwXK','queryStr','getAsks','objectId','zaFSp','nvrws','token','🎉\x20领取积分:\x20','⛔️\x20获取签到任务列表失败!\x20','⛔️\x20获取UccCsrfToken失败!\x20','getUccCsrfToken','modelscope','✅\x20评价电子书：\x20','个账号','default','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2016_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20AliApp(Aliyun/6.7.1)\x20WindVane/8.7.2\x201170x2532\x20WK','✅\x20随机获取文章id：\x20','✅\x20抽奖\x20-\x20','kkAZQ','jsonp_','❌请求发起失败！原因为：','toStr','/score/pending/receiveAllPendingScore?appCode=developer','false','GoCgC','zfgDE','xBKxF','/ebook/','⛔️\x20回答点赞失败!\x20','🎉\x20当前积分:\x20','finally','yyDDV','random','/?wxappid=','gDaBY','https://developer.aliyun.com/developer/api','aqsqj','Content-Type','nZkKf','我的社区','mKtTJ','setHours','\x0a-----------','wait','YOgtD','lfiNi','url','getUserTotalPendingScore','index','filter','✅\x20签到\x20-\x20','ZQLMs','get','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2015_4_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20MicroMessenger/8.0.31(0x18001f37)\x20NetType/WIFI\x20Language/zh_CN','FPFsK','JnVdf','allSettled','.ebook-home-item','title','wiGxZ','✅\x20待领取积分：','/sign/getUserSpaceSignInDetail','⛔️\x20获取\x20csrf\x20失败!\x20','zGFGZ','done','lastIndexOf','✅\x20随机获取问题问答id：\x20','https://ucc.aliyun.com/uccPagingComponent/addComment','getUserSpaceSignInDetail','YYjdn','post','很棒的一本书','message','vsPWP','getTime','replace','⛔️\x20收取积分失败!\x20','pHmBw','424532XzpwHf','计算巢','6ajciOx','更新token成功!','join','龙蜥操作系统','QfMeK','body','Cheerio_code','qRJva','⛔️\x20请求发起失败！','sLspr','获得待领取积分:\x20','notifyMsg','@codeServer.open','333622SuvGqN','用户需要去登录','YfpbD','OPatT','interactData','opts','https://developer.aliyun.com/ebook/','\x20>>\x20Check\x20ck\x20error!','6ZEzrCB','1340119tcfYzE','nLSeZ','/sign/assessSignInBonusQualification','iiURA','debug','ecs','xTbtu','.answer-item','substring','jxndX','access_token','toLowerCase','iot','Cheerio','collect','indexOf','developer-ecology-group','SUDcg','⛔️\x20抽奖失败!\x20','BhqUO','⛔️\x20获取问答列表失败!\x20','receiveSignInBonus','codeServer_open','push','data','find','aliyun-public-like','includes','阿里云社区','fruHZ','\x0a==================\x20任务\x20==================\x0a','数据库','LvdqR','toObj','taskList','cPKMR','/task/actionLog','blAlX','Dwipr','⛔️\x20获取电子书列表失败!\x20','Bearer\x20','ZouKc','cqzib','⛔️\x20抽奖\x20-\x20','ulp.michelin.com.cn','LNzRM','text','undefined','addBookComment','getScript','getCsrfToken','keys','polardb','developer-ecology','EpfWt','addComment','[发送请求]\x20缺少\x20url\x20参数','RQjub','nIIgt','⛔️\x20查询待收获积分列表失败!\x20','codeServer_fun','niFPa','assessSignInBonusQualification','meQzE','getTasks','EhBtG','https://developer.aliyun.com/developer/api/my/ask/voteAnswer','umAEr','iPqWp','.askProduct-item-info-answer','⛔️\x20随机获取问题问答失败!\x20','LZHVW','jVDqw','IS_DEDUG','cloudnative','data-id','userName','getAskDetail','云原生','qgmcv','随机延迟','findIndex','rUovW','msg','共找到',',\x20待领取积分:\x20','devops','OArao','axiiP','kZaKR','DwyyC','✅\x20收取积分：','✅Cheerio模块加载成功,请继续','⛔️\x20签到失败!\x20','❌getWxToken\x20run\x20error\x20=>\x20','3071551VmPRva','UrkzT','https://developer.aliyun.com/ask?pageNum=','catch','qbxEC','ask','ModelScope模型即服务','.feed-item','bigdata','ClEoC','https://ulp.michelin.com.cn/bff/wechat/login/','McEBG','getUser','/task/getTaskGroup?groupId=','toString','xItFi','form','200','NOkut','answer','codeOpen','taskGroupId','aliyunWeb_data','https://developer.aliyun.com/developer/api/my/subscribe/listUserFavor','voteAnswer','/sign/receiveSignInBonus','\x20>>\x20Start\x20work','IWNis','❌加载模块失败，请检查模块路径是否正常','OUHHm','host','479912eVSfmw','wsjlX','❌checkCodeServer\x20run\x20error\x20=>\x20','⛔️\x20查询待领取积分失败!\x20','json','VrtSm','ETWJa','unfRc','当前请求已超时','setjson','aliyunWeb_time','appid','VUlWn','nngcK','12hRnlej','https://developer.aliyun.com/developer/api/ebook/mark/add','actionCode','⛔️\x20获取文章列表失败!\x20','QiFRw','uJTvE','❌loadModule\x20run\x20error\x20=>\x20','ebook','getArticles','❌账号','baseUrl','computenest','setdata','headers','qfZOK',',\x20标题：','ifVPM','load','vDoMd','弹性计算','parse','⛔️\x20文章点赞失败!\x20','IXwFj','getEbooks','aliyun_linux','lLIfd','/my/score/getUserScore?appCode=developer','uUSya','161550GifUWA','.answer-list','yq-article','getdata','storage','60PYBihV','floor','./sendNotify','fetch','startsWith','getRandomTime','tfCrs','race','KMPYX','.askProduct-list','all','ckStatus','env','FUCSO','https://developer.aliyun.com/ask/','luoshen','oYdxb','yIAVa','⛔️\x20','debug\x20error\x20=>\x20t=','QFVeM','失败!\x20','log','AajIf','✅\x20文章评论：\x20','.ebook-home-list','xzjgK','signin','❌checkEnv\x20run\x20error\x20=>\x20','/my/user/getUser','bCxeZ','length','lbUhy','QAIfc','云存储','xnVwH','物联网','svCqp'];_0x59e2=function(){return _0x41a6b5;};return _0x59e2();}async function Request(_0x47e308){const _0x46d8ac=_0xefce07,_0x4c7b19={'umAEr':_0x46d8ac(0x159),'EhBtG':_0x46d8ac(0x91),'FPFsK':_0x46d8ac(0xc8),'RQjub':'data','Dwipr':function(_0x520e5d,_0x233516){return _0x520e5d in _0x233516;},'wsjlX':_0x46d8ac(0x1cc),'AngRm':_0x46d8ac(0x1bd),'yyDDV':_0x46d8ac(0x1ab),'YrAKX':function(_0x26e807,_0x70700){return _0x26e807===_0x70700;},'cvSvs':function(_0x152cb5,_0x1c3b02){return _0x152cb5+_0x1c3b02;},'kZaKR':function(_0x3cc145,_0x345919){return _0x3cc145/_0x345919;},'ZouKc':_0x46d8ac(0x19c),'nZkKf':_0x46d8ac(0x16a),'OUHHm':function(_0x394422,_0x2f1192){return _0x394422===_0x2f1192;}};if(typeof _0x47e308===_0x4c7b19[_0x46d8ac(0x9c)])_0x47e308={'url':_0x47e308};try{if(!_0x47e308?.[_0x46d8ac(0x1a5)])throw new Error(_0x4c7b19[_0x46d8ac(0x9a)]);let {url:_0x4a91a9,type:_0x453017,headers:headers={},body:_0x5db53b,params:_0x3df17a,dataType:dataType=_0x4c7b19[_0x46d8ac(0x1ad)],resultType:resultType=_0x4c7b19[_0x46d8ac(0x92)]}=_0x47e308;const _0x29b2cf=_0x453017?_0x453017?.['toLowerCase']():_0x4c7b19[_0x46d8ac(0x7f)](_0x4c7b19[_0x46d8ac(0xd8)],_0x47e308)?_0x4c7b19[_0x46d8ac(0x174)]:_0x4c7b19['yyDDV'],_0x229ae2=_0x4a91a9[_0x46d8ac(0x131)](_0x4c7b19[_0x46d8ac(0x158)](_0x29b2cf,_0x46d8ac(0x1bd))?_0x4c7b19[_0x46d8ac(0x168)]('?',$['queryStr'](_0x3df17a)):''),_0x3f7964=_0x47e308['timeout']?$[_0x46d8ac(0x151)]()?_0x4c7b19[_0x46d8ac(0xb2)](_0x47e308[_0x46d8ac(0x130)],0x3e8):_0x47e308['timeout']:0x2710;if(_0x4c7b19['YrAKX'](dataType,_0x46d8ac(0xdb)))headers[_0x4c7b19[_0x46d8ac(0x82)]]=_0x4c7b19[_0x46d8ac(0x19d)];const _0x52257d=_0x5db53b&&dataType==_0x4c7b19[_0x46d8ac(0x1ad)]?$[_0x46d8ac(0x178)](_0x5db53b):$[_0x46d8ac(0x18c)](_0x5db53b),_0x1cd312={..._0x47e308,..._0x47e308?.['opts']?_0x47e308[_0x46d8ac(0x1d9)]:{},'url':_0x229ae2,'headers':headers,..._0x4c7b19[_0x46d8ac(0xd5)](_0x29b2cf,_0x4c7b19[_0x46d8ac(0x174)])&&{'body':_0x52257d},..._0x29b2cf===_0x4c7b19[_0x46d8ac(0x196)]&&_0x3df17a&&{'params':_0x3df17a},'timeout':_0x3f7964},_0x59db2d=$['http'][_0x29b2cf[_0x46d8ac(0x1e8)]()](_0x1cd312)[_0x46d8ac(0x15f)](_0x4de2e6=>resultType==_0x46d8ac(0x1f5)?$[_0x46d8ac(0x7a)](_0x4de2e6[_0x46d8ac(0x1cc)])||_0x4de2e6['body']:$[_0x46d8ac(0x7a)](_0x4de2e6)||_0x4de2e6)[_0x46d8ac(0xbb)](_0x470f47=>$[_0x46d8ac(0x11c)](_0x46d8ac(0x18b)+_0x470f47));return Promise[_0x46d8ac(0x10d)]([new Promise((_0x4effd5,_0x9fb3da)=>setTimeout(()=>_0x9fb3da(_0x46d8ac(0xdf)),_0x3f7964)),_0x59db2d]);}catch(_0xb2994c){console['log']('❌请求发起失败！原因为：'+_0xb2994c);}};function randomInt(_0xf9076f,_0x983382){const _0xf30750=_0xefce07,_0x1091b7={'qRJva':function(_0x8ee365,_0x34a052){return _0x8ee365+_0x34a052;},'AajIf':function(_0x12cb40,_0x3cac8f){return _0x12cb40*_0x3cac8f;},'sLspr':function(_0x26722a,_0x5e7ed7){return _0x26722a-_0x5e7ed7;}};return Math['round'](_0x1091b7[_0xf30750(0x1ce)](_0x1091b7[_0xf30750(0x11d)](Math[_0xf30750(0x197)](),_0x1091b7[_0xf30750(0x1d0)](_0x983382,_0xf9076f)),_0xf9076f));};function DoubleLog(_0x10aa27){const _0x4fb1b7=_0xefce07;if(_0x10aa27&&$['isNode']())console['log'](''+_0x10aa27),$[_0x4fb1b7(0x1d2)][_0x4fb1b7(0x1f4)](''+_0x10aa27);else _0x10aa27&&(console[_0x4fb1b7(0x11c)](''+_0x10aa27),$[_0x4fb1b7(0x1d2)][_0x4fb1b7(0x1f4)](''+_0x10aa27));};function debug(_0x2bb183,_0x28e88c=_0xefce07(0x1e1)){const _0x2f0d45=_0xefce07,_0x33ab9b={'yIAVa':function(_0x157522,_0x5d5ff7){return _0x157522===_0x5d5ff7;},'LNzRM':function(_0x3a155e,_0x3d7bd7){return _0x3a155e==_0x3d7bd7;},'FUCSO':_0x2f0d45(0x159)};_0x33ab9b[_0x2f0d45(0x117)]($[_0x2f0d45(0x12c)],_0x2f0d45(0x163))&&($[_0x2f0d45(0x11c)](_0x2f0d45(0x1a1)+_0x28e88c+_0x2f0d45(0x13b)),$['log'](_0x33ab9b[_0x2f0d45(0x86)](typeof _0x2bb183,_0x33ab9b[_0x2f0d45(0x113)])?_0x2bb183:$[_0x2f0d45(0x18c)](_0x2bb183)||_0x2f0d45(0x119)+_0x2bb183),$[_0x2f0d45(0x11c)](_0x2f0d45(0x1a1)+_0x28e88c+_0x2f0d45(0x13b)));};async function SendMsgList(_0x254898){const _0xf556bb=_0xefce07;await Promise[_0xf556bb(0x1af)](_0x254898?.[_0xf556bb(0x14b)](_0x5a5fc2=>SendMsg(_0x5a5fc2[_0xf556bb(0x1bf)][_0xf556bb(0x1c9)]('\x0a'),_0x5a5fc2['avatar'])));};async function SendMsg(_0x409630,_0x121cc6){const _0x1850cf=_0xefce07,_0xb6b07b={'nTyQC':function(_0x1a35a5,_0x4b0006){return _0x1a35a5<_0x4b0006;}};_0x409630&&(_0xb6b07b['nTyQC'](0x0,Notify)?$[_0x1850cf(0x155)]()?await notify['sendNotify']($[_0x1850cf(0x167)],_0x409630):$[_0x1850cf(0xac)]($[_0x1850cf(0x167)],$[_0x1850cf(0x1b1)]||'',_0x409630,{'media-url':_0x121cc6}):console[_0x1850cf(0x11c)](_0x409630));};function ObjectKeys2LowerCase(_0x125125){const _0x18be56=_0xefce07;return _0x125125=Object['fromEntries'](Object['entries'](_0x125125)[_0x18be56(0x14b)](([_0x420c4b,_0x34e53c])=>[_0x420c4b[_0x18be56(0x1e8)](),_0x34e53c])),new Proxy(_0x125125,{'get':function(_0x300124,_0x533391,_0x15eb41){const _0x51d1c4=_0x18be56;return Reflect[_0x51d1c4(0x1ab)](_0x300124,_0x533391['toLowerCase'](),_0x15eb41);},'set':function(_0x25220e,_0x4ceb4b,_0x4512f8,_0x254427){return Reflect['set'](_0x25220e,_0x4ceb4b['toLowerCase'](),_0x4512f8,_0x254427);}});};async function loadCheerio(){const _0x413e0f=_0xefce07,_0x415f87={'blAlX':_0x413e0f(0x1cd),'VVVDv':function(_0x566726){return _0x566726();},'wNeOL':'https://mirror.ghproxy.com/https://raw.githubusercontent.com/Yuheng0101/X/main/Utils/cheerio.js','MkoRG':function(_0xf3892,_0x1a05c7){return _0xf3892(_0x1a05c7);},'iWQdx':function(_0x41703d){return _0x41703d();}};let _0x392988=($[_0x413e0f(0x155)]()?process[_0x413e0f(0x112)][_0x415f87['blAlX']]:$[_0x413e0f(0x104)](_0x415f87[_0x413e0f(0x7e)]))||'';if(_0x392988&&Object[_0x413e0f(0x8c)](_0x392988)[_0x413e0f(0x125)])return console[_0x413e0f(0x11c)]('✅'+$[_0x413e0f(0x167)]+_0x413e0f(0x152)),_0x415f87['MkoRG'](eval,_0x392988),_0x415f87[_0x413e0f(0x175)](createCheerio);return console[_0x413e0f(0x11c)]('🚀'+$[_0x413e0f(0x167)]+_0x413e0f(0x12e)),new Promise(async _0x4415e6=>{const _0x343f6b=_0x413e0f,_0x1674d2={'RFasU':_0x415f87['blAlX'],'AnEIa':function(_0x2cf5ce,_0x206e33){return _0x2cf5ce(_0x206e33);},'sWzsl':function(_0x844607){return _0x415f87['VVVDv'](_0x844607);}};$[_0x343f6b(0x8a)](_0x415f87[_0x343f6b(0x169)])['then'](_0x376bbc=>{const _0xc4deee=_0x343f6b;$[_0xc4deee(0xf1)](_0x376bbc,_0x1674d2['RFasU']),_0x1674d2['AnEIa'](eval,_0x376bbc);const _0x22da9c=_0x1674d2['sWzsl'](createCheerio);console[_0xc4deee(0x11c)](_0xc4deee(0xb5)),_0x4415e6(_0x22da9c);});});};!(async()=>{const _0x291f4e=_0xefce07,_0x2f7585={'axiiP':function(_0x50ea76,_0x551cef){return _0x50ea76!=_0x551cef;},'iiURA':_0x291f4e(0x88),'ETWJa':function(_0x54cfcd){return _0x54cfcd();}};if(_0x2f7585[_0x291f4e(0xb1)](typeof $request,_0x2f7585[_0x291f4e(0x1e0)]))await getCookie();else{if(!await _0x2f7585[_0x291f4e(0xdd)](loadModule))throw new Error(_0x291f4e(0xd4));if(!await checkEnv())throw new Error(_0x291f4e(0x132));if(userList['length']>0x0)await _0x2f7585[_0x291f4e(0xdd)](main);}})()[_0xefce07(0xbb)](_0x18887a=>$[_0xefce07(0x1d2)]['push'](_0x18887a[_0xefce07(0x1bf)]||_0x18887a))[_0xefce07(0x195)](async()=>{const _0x3664e2=_0xefce07,_0x4026fc={'vDoMd':function(_0x4bd71e,_0x5da82f){return _0x4bd71e(_0x5da82f);}};await _0x4026fc[_0x3664e2(0xf7)](SendMsgList,$['notifyList']),$[_0x3664e2(0x1b7)]({'ok':0x1});});
/** ---------------------------------固定不动区域----------------------------------------- */
// prettier-ignore
//From chavyleung's Env.js
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise(((e, r) => { s.call(this, t, ((t, s, a) => { t ? r(t) : e(s) })) })) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.encoding = "utf-8", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } getEnv() { return "undefined" != typeof $environment && $environment["surge-version"] ? "Surge" : "undefined" != typeof $environment && $environment["stash-version"] ? "Stash" : "undefined" != typeof module && module.exports ? "Node.js" : "undefined" != typeof $task ? "Quantumult X" : "undefined" != typeof $loon ? "Loon" : "undefined" != typeof $rocket ? "Shadowrocket" : void 0 } isNode() { return "Node.js" === this.getEnv() } isQuanX() { return "Quantumult X" === this.getEnv() } isSurge() { return "Surge" === this.getEnv() } isLoon() { return "Loon" === this.getEnv() } isShadowrocket() { return "Shadowrocket" === this.getEnv() } isStash() { return "Stash" === this.getEnv() } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; if (this.getdata(t)) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise((e => { this.get({ url: t }, ((t, s, r) => e(r))) })) } runScript(t, e) { return new Promise((s => { let r = this.getdata("@chavy_boxjs_userCfgs.httpapi"); r = r ? r.replace(/\n/g, "").trim() : r; let a = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); a = a ? 1 * a : 20, a = e && e.timeout ? e.timeout : a; const [i, o] = r.split("@"), n = { url: `http://${o}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: a }, headers: { "X-Key": i, Accept: "*/*" }, timeout: a }; this.post(n, ((t, e, r) => s(r))) })).catch((t => this.logErr(t))) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e); if (!s && !r) return {}; { const r = s ? t : e; try { return JSON.parse(this.fs.readFileSync(r)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), r = !s && this.fs.existsSync(e), a = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, a) : r ? this.fs.writeFileSync(e, a) : this.fs.writeFileSync(t, a) } } lodash_get(t, e, s = void 0) { const r = e.replace(/\[(\d+)\]/g, ".$1").split("."); let a = t; for (const t of r) if (a = Object(a)[t], void 0 === a) return s; return a } lodash_set(t, e, s) { return Object(t) !== t || (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce(((t, s, r) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[r + 1]) >> 0 == +e[r + 1] ? [] : {}), t)[e[e.length - 1]] = s), t } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, r] = /^@(.*?)\.(.*?)$/.exec(t), a = s ? this.getval(s) : ""; if (a) try { const t = JSON.parse(a); e = t ? this.lodash_get(t, r, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, r, a] = /^@(.*?)\.(.*?)$/.exec(e), i = this.getval(r), o = r ? "null" === i ? null : i || "{}" : "{}"; try { const e = JSON.parse(o); this.lodash_set(e, a, t), s = this.setval(JSON.stringify(e), r) } catch (e) { const i = {}; this.lodash_set(i, a, t), s = this.setval(JSON.stringify(i), r) } } else s = this.setval(t, e); return s } getval(t) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.read(t); case "Quantumult X": return $prefs.valueForKey(t); case "Node.js": return this.data = this.loaddata(), this.data[t]; default: return this.data && this.data[t] || null } } setval(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": return $persistentStore.write(t, e); case "Quantumult X": return $prefs.setValueForKey(t, e); case "Node.js": return this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0; default: return this.data && this.data[e] || null } } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { switch (t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"], delete t.headers["content-type"], delete t.headers["content-length"]), t.params && (t.url += "?" + this.queryStr(t.params)), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let s = require("iconv-lite"); this.initGotEnv(t), this.got(t).on("redirect", ((t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } })).then((t => { const { statusCode: r, statusCode: a, headers: i, rawBody: o } = t, n = s.decode(o, this.encoding); e(null, { status: r, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: r, response: a } = t; e(r, a, a && s.decode(a.rawBody, this.encoding)) })) } } post(t, e = (() => { })) { const s = t.method ? t.method.toLocaleLowerCase() : "post"; switch (t.body && t.headers && !t.headers["Content-Type"] && !t.headers["content-type"] && (t.headers["content-type"] = "application/x-www-form-urlencoded"), t.headers && (delete t.headers["Content-Length"], delete t.headers["content-length"]), void 0 === t.followRedirect || t.followRedirect || ((this.isSurge() || this.isLoon()) && (t["auto-redirect"] = !1), this.isQuanX() && (t.opts ? t.opts.redirection = !1 : t.opts = { redirection: !1 })), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient[s](t, ((t, s, r) => { !t && s && (s.body = r, s.statusCode = s.status ? s.status : s.statusCode, s.status = s.statusCode), e(t, s, r) })); break; case "Quantumult X": t.method = s, this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then((t => { const { statusCode: s, statusCode: r, headers: a, body: i, bodyBytes: o } = t; e(null, { status: s, statusCode: r, headers: a, body: i, bodyBytes: o }, i, o) }), (t => e(t && t.error || "UndefinedError"))); break; case "Node.js": let r = require("iconv-lite"); this.initGotEnv(t); const { url: a, ...i } = t; this.got[s](a, i).then((t => { const { statusCode: s, statusCode: a, headers: i, rawBody: o } = t, n = r.decode(o, this.encoding); e(null, { status: s, statusCode: a, headers: i, rawBody: o, body: n }, n) }), (t => { const { message: s, response: a } = t; e(s, a, a && r.decode(a.rawBody, this.encoding)) })) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let r = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in r) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? r[e] : ("00" + r[e]).substr(("" + r[e]).length))); return t } queryStr(t) { let e = ""; for (const s in t) { let r = t[s]; null != r && "" !== r && ("object" == typeof r && (r = JSON.stringify(r)), e += `${s}=${r}&`) } return e = e.substring(0, e.length - 1), e } msg(e = t, s = "", r = "", a) { const i = t => { switch (typeof t) { case void 0: return t; case "string": switch (this.getEnv()) { case "Surge": case "Stash": default: return { url: t }; case "Loon": case "Shadowrocket": return t; case "Quantumult X": return { "open-url": t }; case "Node.js": return }case "object": switch (this.getEnv()) { case "Surge": case "Stash": case "Shadowrocket": default: return { url: t.url || t.openUrl || t["open-url"] }; case "Loon": return { openUrl: t.openUrl || t.url || t["open-url"], mediaUrl: t.mediaUrl || t["media-url"] }; case "Quantumult X": return { "open-url": t["open-url"] || t.url || t.openUrl, "media-url": t["media-url"] || t.mediaUrl, "update-pasteboard": t["update-pasteboard"] || t.updatePasteboard }; case "Node.js": return }default: return } }; if (!this.isMute) switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": default: $notification.post(e, s, r, i(a)); break; case "Quantumult X": $notify(e, s, r, i(a)); case "Node.js": }if (!this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), r && t.push(r), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { switch (this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: this.log("", `❗️${this.name}, 错误!`, t); break; case "Node.js": this.log("", `❗️${this.name}, 错误!`, t.stack) } } wait(t) { return new Promise((e => setTimeout(e, t))) } done(t = {}) { const e = ((new Date).getTime() - this.startTime) / 1e3; switch (this.log("", `🔔${this.name}, 结束! 🕛 ${e} 秒`), this.log(), this.getEnv()) { case "Surge": case "Loon": case "Stash": case "Shadowrocket": case "Quantumult X": default: $done(t); break; case "Node.js": process.exit(1) } } }(t, e) }
